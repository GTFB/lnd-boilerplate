/* stylelint-disable at-rule-no-unknown */
@tailwind base;
@tailwind components;
@tailwind utilities;
/* stylelint-enable at-rule-no-unknown */

@import './blog.css';

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 0 0% 0% !important;
    --foreground: 0 0% 98% !important;
    --card: 0 0% 3.9% !important;
    --card-foreground: 0 0% 98% !important;
    --popover: 0 0% 3.9% !important;
    --popover-foreground: 0 0% 98% !important;
    --primary: 0 0% 98% !important;
    --primary-foreground: 0 0% 9% !important;
    --secondary: 0 0% 14.9% !important;
    --secondary-foreground: 0 0% 98% !important;
    --muted: 0 0% 14.9% !important;
    --muted-foreground: 0 0% 63.9% !important;
    --accent: 0 0% 14.9% !important;
    --accent-foreground: 0 0% 98% !important;
    --destructive: 0 62.8% 30.6% !important;
    --destructive-foreground: 0 0% 98% !important;
    --border: 0 0% 14.9% !important;
    --input: 0 0% 14.9% !important;
    --ring: 0 0% 83.1% !important;
  }
}

@layer base {
  * {
    @apply border-border;
    box-sizing: border-box;
  }

  html, body {
    @apply bg-background text-foreground;
    overflow-x: hidden;
    max-width: 100vw;
  }

  *, *::before, *::after {
    max-width: 100%;
  }

  input:focus,
  textarea:focus,
  select:focus,
  button:focus,
  *[class*="ring"] {
    outline: none !important;
    box-shadow: none !important;
  }

  input:focus,
  input:focus-visible,
  textarea:focus,
  textarea:focus-visible,
  select:focus,
  select:focus-visible {
    border-color: hsl(var(--ring)) !important;
  }
  
  svg, [class*="icon"], [class*="Icon"], [class*="flag"], [class*="Flag"] {
    background-color: transparent !important;
  }

  /* Theme toggle hover effects */
  [data-theme-toggle]:hover {
    background-color: transparent !important;
  }

  [data-theme-toggle] svg {
    color: hsl(var(--muted-foreground));
    transition: color 0.2s ease;
  }

  [data-theme-toggle]:hover svg {
    color: hsl(var(--foreground));
  }
}

.grid-container {
  display: grid;
  grid-template-columns: 270px 1fr 208px;
  grid-template-areas: "left-sidebar content right-sidebar";
  gap: 0 1.25rem;
  transition: grid-template-columns 0.4s ease-in-out;
}

.left-sidebar { grid-area: left-sidebar; }
.content { grid-area: content; }
.right-sidebar { grid-area: right-sidebar; }

.content {
  padding-left: 20px;
  padding-right: 20px;
  min-width: 0;
}
.content > * {
  min-width: 0;
}

.grid-container.sidebar-hidden {
  grid-template-columns: 0 1fr 208px;
  gap: 0;
}

.grid-container.sidebar-hidden .left-sidebar {
  opacity: 0;
  transform: translateX(0);
  pointer-events: none;
  transition: opacity 0.4s, transform 0.4s;
}

html, body, .grid-container, [class*="flex"] {
  overflow: visible;
  contain: none;
  transform: none;
  filter: none;
}
html, body {
  overflow-x: hidden;
}

header,
.left-sidebar > div:first-child,
.right-sidebar > div:first-child {
  position: sticky !important;
}

header {
  position: sticky !important;
  top: 0 !important;
  z-index: 50 !important;
  background: hsl(var(--background)) !important;
  backdrop-filter: blur(8px) !important;
}

@media (min-width: 1024px) {
  .left-sidebar > div:first-child,
  .right-sidebar > div:first-child {
    top: 6rem !important;
    z-index: 10 !important;
  }
}

.left-sidebar > *, .right-sidebar > * {
  min-width: 0;
  overflow-x: auto;
}

.left-sidebar a, .right-sidebar a {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  display: block;
}

.offcanvas-overlay {
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(8px);
  z-index: 1999;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.4s, visibility 0.4s;
}

.offcanvas-menu {
  position: fixed;
  top: 0;
  right: 0;
  width: 320px;
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: hsl(var(--background));
  border-left: 1px solid hsl(var(--border));
  z-index: 2000;
  transform: translateX(100%);
  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.offcanvas-overlay.is-open {
  opacity: 1;
  visibility: visible;
}

.offcanvas-menu.is-open {
  transform: translateX(0);
}

.offcanvas-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  border-bottom: 1px solid hsl(var(--border));
  flex-shrink: 0;
  background: hsl(var(--background));
}

.offcanvas-content {
  padding: 1.5rem;
  flex-grow: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
.offcanvas-content::-webkit-scrollbar {
  display: none;
}

.offcanvas-header .LanguageSelector,
.mobile-sidebar .LanguageSelector,
.left-sidebar.mobile-expanded .LanguageSelector {
  position: relative;
  z-index: 51;
}

/* Fix language selector dropdown in offcanvas */
.offcanvas-content .LanguageSelector {
  position: relative;
  z-index: 2001;
}

.offcanvas-content .LanguageSelector [class*="dropdown"],
.offcanvas-content .LanguageSelector [class*="menu"] {
  position: absolute;
  top: 100%;
  right: 0;
  z-index: 2002;
  max-height: 300px;
  overflow-y: auto;
  margin-top: 8px;
  min-width: 200px;
  width: max-content;
}

/* Ensure other menu items stay visible when language dropdown is open */
.offcanvas-content {
  z-index: 2000 !important;
}

.offcanvas-content > *:not(.LanguageSelector) {
  z-index: 2001 !important;
  position: relative !important;
}

.offcanvas-content .LanguageSelector {
  z-index: 2003 !important;
}

.offcanvas-content .LanguageSelector .language-selector-dropdown {
  z-index: 2004 !important;
}

/* Ensure dropdown is not clipped by offcanvas */
.offcanvas-content .language-selector-dropdown {
  position: absolute !important;
  top: 100% !important;
  right: 0 !important;
  z-index: 2002 !important;
  max-height: 300px !important;
  overflow-y: auto !important;
  margin-top: 8px !important;
  min-width: 200px !important;
  width: max-content !important;
  max-width: calc(100vw - 40px) !important;
}

/* Prevent dropdown from being clipped by offcanvas edges */
.offcanvas-content .LanguageSelector [class*="dropdown"],
.offcanvas-content .LanguageSelector [class*="menu"] {
  max-width: calc(100vw - 40px) !important;
}

/* Additional fix for language selector positioning in offcanvas */
.offcanvas-content .LanguageSelector {
  position: relative !important;
  z-index: 2001 !important;
  overflow: visible !important;
}

.offcanvas-content .LanguageSelector > div {
  overflow: visible !important;
}

.offcanvas-content .LanguageSelector button {
  overflow: visible !important;
}

/* Fix language selector visibility in offcanvas */
.offcanvas-content .LanguageSelector .language-selector-button {
  background-color: hsl(var(--card)) !important;
  border: 1px solid hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

.offcanvas-content .LanguageSelector .language-selector-dropdown {
  background-color: hsl(var(--card)) !important;
  border: 1px solid hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

.offcanvas-content .LanguageSelector .language-selector-item {
  background-color: transparent !important;
  color: hsl(var(--foreground)) !important;
}

.offcanvas-content .LanguageSelector .language-selector-item:hover {
  background-color: hsl(var(--accent)) !important;
  color: hsl(var(--accent-foreground)) !important;
}

.offcanvas-content .LanguageSelector .language-selector-item.bg-accent {
  background-color: hsl(var(--accent)) !important;
  color: hsl(var(--accent-foreground)) !important;
}

/* Fix icons in language selector offcanvas */
.offcanvas-content .LanguageSelector svg,
.offcanvas-content .LanguageSelector .language-chevron-icon,
.offcanvas-content .LanguageSelector .language-check-icon {
  color: hsl(var(--foreground)) !important;
  background-color: transparent !important;
}

.offcanvas-content .LanguageSelector .language-selector-item:hover svg,
.offcanvas-content .LanguageSelector .language-selector-item:hover .language-check-icon {
  color: hsl(var(--accent-foreground)) !important;
}

.offcanvas-content .LanguageSelector .language-selector-item.bg-accent svg,
.offcanvas-content .LanguageSelector .language-selector-item.bg-accent .language-check-icon {
  color: hsl(var(--accent-foreground)) !important;
}

/* Fix language selector overlay to not interfere with other menu items */
.offcanvas-content .LanguageSelector [class*="fixed top-16 left-0 right-0 bottom-0"],
.offcanvas-content .LanguageSelector [class*="absolute inset-0"] {
  z-index: 2002 !important;
  pointer-events: none !important;
  position: absolute !important;
  top: 100% !important;
  left: 0 !important;
  right: 0 !important;
  bottom: auto !important;
  height: 100vh !important;
}

.offcanvas-content .LanguageSelector .language-selector-dropdown {
  pointer-events: auto !important;
}

/* Ensure other menu items in offcanvas stay visible */
.offcanvas-content > *:not(.LanguageSelector) {
  z-index: 2001 !important;
  position: relative !important;
  background-color: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
}

/* Global language selector dropdown width fix */
.LanguageSelector .language-selector-dropdown {
  min-width: 200px !important;
  width: max-content !important;
  max-width: calc(100vw - 40px) !important;
  padding-bottom: 0rem !important;
}

.LanguageSelector [class*="dropdown"] {
  min-width: 200px !important;
  width: max-content !important;
  max-width: calc(100vw - 40px) !important;
  padding-bottom: 0rem !important;
}

/* Center language selector dropdown */
.LanguageSelector .language-selector-dropdown {
  left: 50% !important;
  right: auto !important;
  transform: translateX(-50%) !important;
  padding-bottom: 0rem !important;
}

.LanguageSelector [class*="dropdown"] {
  left: 50% !important;
  right: auto !important;
  transform: translateX(-50%) !important;
  padding-bottom: 0rem !important;
}

/* Center language selector dropdown in offcanvas */
.offcanvas-content .LanguageSelector .language-selector-dropdown {
  left: 50% !important;
  right: auto !important;
  transform: translateX(-50%) !important;
}

.offcanvas-content .LanguageSelector [class*="dropdown"],
.offcanvas-content .LanguageSelector [class*="menu"] {
  left: 50% !important;
  right: auto !important;
  transform: translateX(-50%) !important;
}

/* Modal and scroll lock styles - prevent content shift */
body.no-scroll, body.modal-open, body[data-scroll-locked] {
  overflow: hidden !important;
  padding-right: 0 !important;
  margin-right: 0 !important;
}

/* Prevent any scrollbar compensation that might cause content shift */
body[style*="padding-right"] {
  padding-right: 0 !important;
}

/* Override any inline padding-right styles on body */
body {
  padding-right: 0 !important;
  margin-right: 0 !important;
  transform: none !important;
  /* Prevent pointer-events from affecting layout */
  pointer-events: auto !important;
}

/* Force override any possible margin-right sources */
body,
body *,
body *::before,
body *::after {
  margin-right: 0 !important;
}

/* Specific override for any Tailwind or external CSS */
body[class*="mr-"],
body[class*="margin"],
body[class*="pr-"],
body[class*="padding"] {
  margin-right: 0 !important;
  padding-right: 0 !important;
}

/* Nuclear option - prevent any possible 13px margin */
body,
html {
  margin: 0 !important;
  padding: 0 !important;
}

/* Override any computed styles that might cause shift */
body {
  margin-right: 0 !important;
  padding-right: 0 !important;
  box-sizing: border-box !important;
  width: 100% !important;
  max-width: 100vw !important;
  overflow-x: hidden !important;
}

/* Debug styles - prevent any possible shift sources */
html {
  margin-right: 0 !important;
  padding-right: 0 !important;
  transform: none !important;
}

/* Prevent fixed elements from adding any offset */
[data-radix-portal] {
  transform: none !important;
}

/* Additional safeguards */
* {
  box-sizing: border-box !important;
}

/* Simple dropdown animations */
[data-radix-popper-content-wrapper] {
  animation: none !important;
}

/* Smooth chevron rotation */
.chevron-rotate {
  transition: transform 200ms cubic-bezier(0.16, 1, 0.3, 1) !important;
}

/* Simple dropdown content animations - only opacity */
.dropdown-content-enter {
  opacity: 0;
  transition: opacity 200ms ease-out;
}

.dropdown-content-enter-active {
  opacity: 1;
}

.dropdown-content-exit {
  opacity: 1;
  transition: opacity 150ms ease-out;
}

.dropdown-content-exit-active {
  opacity: 0;
}

/* Simple dropdown transitions - only opacity */
[data-radix-popper-content-wrapper] {
  transition: opacity 200ms ease-out !important;
}

/* Simple dropdown appearance - no movement */
[data-radix-popper-content-wrapper][data-state="open"] {
  opacity: 1;
  transform: none;
}

[data-radix-popper-content-wrapper][data-state="closed"] {
  opacity: 0;
  transform: none;
}

/* Enhanced chevron animations */
.chevron-rotate {
  transition: transform 200ms cubic-bezier(0.16, 1, 0.3, 1) !important;
}

/* Chevron rotation states */
.chevron-rotate[data-state="open"] {
  transform: rotate(180deg) !important;
}

.chevron-rotate[data-state="closed"] {
  transform: rotate(0deg) !important;
}

/* Override Tailwind rotate classes for chevron */
.chevron-rotate.data-\[state\=open\]\:rotate-180 {
  transform: rotate(180deg) !important;
}

/* Smooth icon transitions */
.icon-transition {
  transition: all 200ms cubic-bezier(0.16, 1, 0.3, 1);
}

/* Enhanced hover effects */
.dropdown-trigger {
  padding-bottom: 0.25rem !important;
  position: relative;
  overflow: hidden;
  border-radius: 0 !important;
  padding-left: 0 !important;
  padding-right: 0 !important;
}

.dropdown-trigger::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: -100%;
  width: 100%;
  height: 2px;
  background: hsl(var(--primary));
  border-radius: 1px;
  transition: left 300ms cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.dropdown-trigger:hover::after {
  left: 0;
}

.dropdown-trigger:hover {
  color: hsl(var(--primary)) !important;
  background-color: transparent !important;
  transition: all 200ms cubic-bezier(0.16, 1, 0.3, 1);
}

/* Active dropdown state */
.dropdown-trigger[data-state="open"]::after {
  left: 0;
}

.dropdown-trigger[data-state="open"] {
  color: hsl(var(--primary)) !important;
  background-color: transparent !important;
}

.dropdown-item-hover {
  width: -webkit-fill-available;
  align-items: baseline;
}

/* Force left alignment for all dropdown content */
[data-radix-popper-content-wrapper] * {
  text-align: left !important;
}

[data-radix-popper-content-wrapper] button,
[data-radix-popper-content-wrapper] div {
  justify-content: flex-start !important;
  text-align: left !important;
}

/* Force remove padding for language selector dropdown items */
[data-radix-popper-content-wrapper] [role="menuitem"] {
  padding-bottom: 0 !important;
}

[data-radix-popper-content-wrapper] [data-radix-dropdown-menu-item] {
  padding-bottom: 0 !important;
}

/* Force remove padding for language selector labels */
[data-radix-popper-content-wrapper] [data-radix-dropdown-menu-label] {
  padding-bottom: 0 !important;
}

/* Force remove margin for language selector separators */
[data-radix-popper-content-wrapper] [data-radix-dropdown-menu-separator] {
  margin-bottom: 0 !important;
}

/* Active page styles */
.active-page {
  pointer-events: none !important;
  padding: 0.55rem 0 0.25rem 0 !important;
  border-radius: 0 !important;
}

.active-page:hover {
  background-color: transparent !important;
  transform: none !important;
}

.active-page::after {
  display: none !important;
}

/* Specific override for language dropdown */
[data-radix-popper-content-wrapper] .language-dropdown [role="menuitem"],
[data-radix-popper-content-wrapper] .language-dropdown [data-radix-dropdown-menu-item] {
  padding-bottom: 0 !important;
}

/* Force remove all button hover backgrounds */
.dropdown-trigger:hover,
.dropdown-trigger:focus,
.dropdown-trigger:active {
  background-color: transparent !important;
  box-shadow: none !important;
}

/* Remove button default styles */
.dropdown-trigger {
  background: transparent !important;
  border: none !important;
  outline: none !important;
}

/* Dropdown backdrop for better UX */
.dropdown-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
  z-index: 49;
}

/* Simple dropdown switching - no movement */
.dropdown-switch-enter {
  opacity: 0;
  transition: opacity 150ms ease-out;
}

.dropdown-switch-enter-active {
  opacity: 1;
}

.dropdown-switch-exit {
  opacity: 1;
  transition: opacity 100ms ease-out;
}

.dropdown-switch-exit-active {
  opacity: 0;
}

[data-cookie-banner], .scroll-progress-container {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100vw !important;
  z-index: 60;
  transform: none !important;
}
[data-cookie-banner] {
  transition: opacity 0.3s ease !important;
}

.search-modal .max-w-2xl {
  max-width: 42rem !important;
  width: 100% !important;
}

@layer components {
  .prose {
    width: 100% !important;
    max-width: none !important;
  }
  .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
    @apply font-heading;
  }
  .prose h1 { @apply text-4xl font-bold mb-6 mt-8 tracking-tight; }
  .prose h2 { @apply text-3xl font-semibold mb-4 mt-8 tracking-tight; }
  .prose h3 { @apply text-2xl font-semibold mb-3 mt-6 tracking-tight; }
  .prose p { @apply leading-7 mb-4; }
  .prose a { @apply text-blue-600 dark:text-blue-400 hover:underline underline-offset-2; }
  .prose code:not(pre code) { @apply bg-muted text-foreground px-1.5 py-0.5 rounded text-sm font-mono; }
  .prose pre { @apply bg-muted rounded-lg p-4 overflow-x-auto mb-6; }
  .prose pre code { @apply bg-transparent p-0; }
  .prose blockquote { @apply border-l-4 border-blue-500 bg-blue-50 dark:bg-blue-950/20 pl-4 py-2 my-6 rounded-r-lg; }
  .prose ul, .prose ol { @apply mb-6 space-y-2 pl-6; }
  .prose ul { @apply list-disc; }
  .prose ol { @apply list-decimal; }
  .prose img { @apply rounded-lg max-w-full h-auto mb-6; }

  .content h1:first-child, .content h2:first-child,
  .prose h1:first-child, .prose h2:first-child {
    margin-top: 0 !important;
  }

  .content-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding-top: 38px;
    margin-bottom: 24px;
  }
}

.shiki {
  @apply bg-muted text-foreground rounded-lg p-4 overflow-x-auto !important;
}
.shiki pre, .shiki code {
  background-color: transparent !important;
}
.shiki *, .shiki code {
  color: inherit !important;
}

.back-to-top {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  z-index: 40;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s, visibility 0.3s;
}
.back-to-top.visible {
  opacity: 1;
  visibility: visible;
}

@layer base {
  html.dark, body.dark {
    background-color: hsl(var(--background)) !important;
    color: hsl(var(--foreground)) !important;
  }

  .dark [class*="backdrop-blur"],
  .dark [class*="bg-background/"] {
    background-color: rgba(0, 0, 0, 0.8) !important;
    backdrop-filter: blur(8px) !important;
  }

  .dark .bg-primary { background-color: hsl(var(--primary)) !important; }
  .dark .text-primary-foreground { color: hsl(var(--primary-foreground)) !important; }
}

* {
  transition: none;
}

body, header, nav, main, aside, footer, .button,
[class*="bg-"], [class*="text-"], [class*="border-"] {
  transition: background-color 0.15s ease-out,
              color 0.15s ease-out,
              border-color 0.15s ease-out !important;
}

@layer utilities {
  .line-clamp-2, .line-clamp-3 {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  .line-clamp-2 { -webkit-line-clamp: 2; }
  .line-clamp-3 { -webkit-line-clamp: 3; }
  
  /* Blob animation for hero section */
  @keyframes blob {
    0% {
      transform: translate(0px, 0px) scale(1);
    }
    33% {
      transform: translate(30px, -50px) scale(1.1);
    }
    66% {
      transform: translate(-20px, 20px) scale(0.9);
    }
    100% {
      transform: translate(0px, 0px) scale(1);
    }
  }
  
  .animate-blob {
    animation: blob 7s infinite;
  }
  
  .animation-delay-2000 {
    animation-delay: 2s;
  }
  
  .animation-delay-4000 {
    animation-delay: 4s;
  }
}

.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

@media (max-width: 1280px) {
  .grid-container {
    grid-template-columns: 270px 1fr !important;
    grid-template-areas: "left-sidebar content" !important;
  }
  .grid-container.sidebar-hidden {
    grid-template-columns: 0 1fr !important;
  }
  .right-sidebar {
    display: none !important;
  }
}

@media (max-width: 1023px) {
  .left-sidebar > div, .right-sidebar > div {
    position: static !important;
  }

  .grid-container {
    display: block !important;
  }

  .left-sidebar, .right-sidebar, .content {
    margin: 0 !important;
    padding-left: 20px !important;
    padding-right: 20px !important;
  }
  
  .right-sidebar {
    display: block !important;
  }

  .mobile-hide { display: none !important; }
  .mobile-show { display: inline-block !important; }

  .content-header {
    flex-direction: row-reverse !important;
  }

  .left-sidebar {
    max-height: 0 !important;
    opacity: 0 !important;
    visibility: hidden !important;
    overflow: hidden !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    margin-top: 1rem !important;
    transition: max-height 0.4s ease-out, opacity 0.4s ease-out, padding 0.4s ease-out !important;
  }
  .left-sidebar.mobile-expanded {
    max-height: 500px !important;
    opacity: 1 !important;
    visibility: visible !important;
    overflow: visible !important;
    padding: 1rem !important;
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius);
  }
}